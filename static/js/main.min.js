soundManager.setup({url:"/static/swf/",flashVersion:9,debugFlash:false,debugMode:false,useHTML5Audio:true,preferFlash:false,forceUseGlobalHTML5Audio:true,flashLoadTimeout:0,ontimeout:function(){},ontimeout:function(){},defaultOptions:{volume:95}});var file,id,oldId,oldFile,player=false;play_ids=[];audio_obj={playing_id:null,state:"stop",last_play_id:null};var apiUrl="https://7nota.kz/api/audio-detail/";function getUrl(b){var a=null;$.ajax({url:apiUrl+b,type:"get",dataType:"json",async:false,success:function(c){a=c}});return a.file}$(function(){play_ids=[];$(".play").each(function(){var a=$(this).attr("id");play_ids.push(a)});$(".play").click(function(b){var c=$(this).attr("id");var a=$(this).attr("data-file");play(c,a);b.preventDefault()})});function bind_play_buttons(){play_ids=[];$(".play").each(function(){$(this).unbind("click");var a=$(this).attr("id");play_ids.push(a)});$(".play").click(function(){var b=$(this).attr("id");var a=$(this).attr("data-file");play(b,a)})}function getTime(e,f){var a=Math.floor(e/1000),c=Math.floor(a/3600),b=Math.floor(a/60)-Math.floor(c*60),d=Math.floor(a-(c*3600)-(b*60));return(f?((c?c+":":"")+(c&&b<10?"0"+b:b)+":"+(d<10?"0"+d:d)):{min:b,sec:d})}function play(d,b){var c=$("#"+d);var a="audio"+c.attr("id");if(audio_obj.state=="play"&&audio_obj.playing_id==a){pause(d);return}if(audio_obj.last_play_id!=null&&audio_obj.last_play_id!=d){stop(audio_obj.last_play_id)}$("#song"+d).addClass("playing");if(audio_obj.state=="pause"&&audio_obj.playing_id==a){resume(d)}else{audio_obj.playing_id=a;audio_obj.last_play_id=d;audio_obj.state="play";c.addClass("playing");c.find("span").attr("class","spinner-border");soundManager.createSound({id:"audio"+d,url:b,onload:function(){c.removeClass("spinner-border");c.find("span").attr("class","i i-pause2")},whileloading:function(){$("#load"+d).css("width",((this.bytesLoaded/this.bytesTotal)*100)+"%")},whileplaying:function(){$("#progress"+d).css("width",((this.position/this.duration)*100)+"%");$("#minute"+d).html(getTime(this.position,true))},onfinish:function(){}});soundManager.play(a,{onfinish:function(){stop(d);var f=false;for(var h in play_ids){if(f==true){var g=play_ids[h];break}if(play_ids[h]==d){f=true}}var e=getUrl(g);if(e!=undefined){play(g,e)}}})}$("#seek"+d).click(function(h){var f="audio"+d;var g=soundManager.getSoundById(f);var j=$(this).offset().left;var i=Math.min(Math.max((h.pageX-j)/$(this).width()*100,0),g.duration);if(!isNaN(i)&&g){g.setPosition(Math.round(i*g.duration/100))}})}function pause(c){var b=$("#"+c);var a="audio"+b.attr("id");audio_obj.state="pause";b.removeClass("playing");b.find("span").attr("class","i i-play2");soundManager.pause(a)}function resume(c){var b=$("#"+c);var a="audio"+c;audio_obj.playing_id=a;audio_obj.last_play_id=c;audio_obj.state="play";b.addClass("playing");b.find("span").attr("class","i i-pause2");soundManager.resume(a)}function stop(d){var b=$("#"+d);var a="audio"+b.attr("id");$("#progress"+d).css("width","0");var c=soundManager.getSoundById(a);$("#minute"+d).html(getTime(c.duration,true));audio_obj.state="stop";audio_obj.last_play_id=null;b.removeClass("playing");$("#song"+d).removeClass("playing");b.find("span").attr("class","i i-play2");soundManager.stop(a)};
